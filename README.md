# Intermediate SQL - Sales Analysis

## Overview

Analyzed customer lifetime value (LTV), segmented customers based on their lifetime value, and analyzed customer retention rates for an e-commerce company to gain insights into customer behavior and improve business strategies.

## Business Questions

1. **Customer Segmentation Analysis:** How do different customer segments contribute to the revenue?
2. **Cohort Analysis:** How do different customer groups generate revenue?
3. **Customer Retention Analysis:** Which customers haven't purchased in the last 6 months?

## Analysis Approach

### 1. Customer Segmentation Analysis
- Categorized customers based on their total lifetime value (LTV) into High, Mid and Low-Value segments.
- Calculated the total revenue generated by each segment and the average revenue per customer per segment.

Query: [1_customer_segmentation.sql](/Scripts/1_customer_segmentation.sql)

**Visualization:**

![@customer_segmentation.png](/images/2_customer_segmentation.png)

**Key Findings:**

- High-value customers (25% of total customers) generate 66% of the total revenue ($135.6M).
- Mid-value customers (50% of total customers) generate 32% of the total revenue ($66.4M).
- Low-value customers (25% of total customers) generate 2.1% of the total revenue ($4.3M).

**Business Insights:**

- Focus on retaining high-value customers as they contribute significantly to revenue.
- Mid-value customers are also important contributors to the revenue generation but require more attention and can be upgraded to high-value customers.
- Low-value customers needs special attention and can be targeted for promotions and upgrades.

### 2. Cohort Analysis
- Tracked revenue and customer counts per cohort over time.
- cohorts are grouped by the first purchase date.
- Analyzed average revenue spent per customer per cohort.

Query: [2_cohort_analysis.sql](/Scripts/2_cohort_analysis.sql)

**Visualization:**

![2_cohort_analysis.png](/images/2_cohort_analysis.png)

**Key Findings:**
- Per customer revenue is keep decreasing over the years.
- Cohorts 2022 - 2024 performs worse than the previous cohorts.
- Although the per customer revenue is decreasing, the overall revenue increases mainly due to the increase in the number of customers but the actual customer value is decreasing in a concerning manner.

**Business Insights:**
- The analysis shows that the customer value is decreasing over time and needs further analysis to understand the reasons behind this trend.
- Cohort 2023 also shows a drop in the number of new customers acquired compared to the previous cohorts. This behavior also needs further investigation.
- The major issues facing by the company are the decrease in the customer LTV and the decrease in the number of new customers acquired.

### 3. Customer Retention Analysis
- Tracked customer retention rates over time.
- Calculated retention rates for each cohort.
- Identified the Active and Churned customers.

Query: [3_retention_analysis.sql](/Scripts/3_retention_analysis.sql)

**Visualization:**

![3_retention_analysis.png](/images//3_customer_retention.png)

**Key Findings:**
- The remarkably stable ~90% churn rate across all cohorts suggests a systematic issue rather than isolated problems.
- The slight improvement in 2022 (10.40% retention vs. ~9% in other years) could indicate that certain initiatives or market conditions were working in favour.
- Despite significant fluctuations in total customer acquisition (ranging from ~3,000 to ~9,000 customers), retention rates remain nearly identical.

**Business Insights:**
- The high consistent churn may indicate a fundamental misalignment between companies offering and long-term customer needs.
- Customers might not be experiencing enough early value to justify continued usage.

## Strategic Recommendations

- Implement loyalty programs or rewards to encourage repeat purchases for different customer segments like launching VIP programs for high-value customers, personalized upgrades for mid-value customers, and special price discounts for low-value customers.
- Target newer cohort customers with tailored marketing campaigns to increase customer acquisition.
- Offer personalized recommendations and targeted promotions to enhance customer engagement.
- Implement a robust customer support system to address customer inquiries and concerns promptly.
- Regularly analyze customer feedback to identify patterns and trends, and take necessary actions to address any issues or concerns.

## Technical Details

- **Database:** PostgreSQL
- **Analysis Tools:** PostgreSQL, DBeaver
- **Visualization Tools:** Claude

## Acknowledgement

I would like to express my sincere gratitude to [Luke Barousse](https://github.com/lukebarousse) for providing the guidance and resources that made this project possible. The expertise was invaluable in helping me analyze the dataset and derive actionable insights. The guidance and support were instrumental in the success of this project. Thank you, Luke, for your invaluable contributions!

## Contact

If you have any questions or would like to connect, feel free to reach out to me at [bijoynandi31@gmail.com](mailto:bijoynandi31@gmail.com). I'm always open to discussions and collaborations. Happy querying!